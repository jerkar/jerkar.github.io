<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Tour</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Java build tool">
    <meta name="author" content="Jerome Angibaud">
    <meta name="keywords" content="build,java,tool,automation,maven,ant,gradle,buildr,sbt,make,compiler,tester,jacoco">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- <link href="css/bootstrap.min.css" rel="stylesheet">  -->
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
      
    <![endif]-->
    
      <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  
  	<!-- highlight.js -->
  	<script src="js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<link rel="stylesheet" href="css/highlight-idea.css">
  
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">

	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Jerkar</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="about.html">About</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
        </div>
       
        
      </div>
    </div>
    <div class="container">
	<p><h1>Welcome to Jerkar tour</h1><p>With Jerkar you can write free form build definition (ala <em>Ant</em>), templated ones (ala <em>Maven</em>) or rely on conventions only (no build script needed). In the following section,<br/>we will illustrate different different approach to use Jerkar. </p><h3>Principles</h3><p>Jerkar is quite simpe in its principle. You write a class extending <code>org.jerkar.JkBuild</code> in the <em>build/def</em> folder of your project then you can execute any public zero arg methods from the command line by executing <code>jerkar myMethod1 myOtherMethod</code> at the root folder of your project.<br/>To accomplish this, Jerkar :</p>
<ul>
  <li>compiles every java sources found under the <em>build/def</em> folder</li>
  <li>instantiates the first compiled class found implementing <code>org.jerkar.JkBuild</code>. If none the <code>org.jerkar.builtins.javabuild.JkJavaBuild</code> class is instantiated</li>
  <li>invokes specified methods on the created instance. If no method is specified then the <code>doDefault</code> method is invoked</li>
</ul><p>You can also set any instance field annotated with <code>JkOption</code> from the command line by typing <code>jerkar myMethod -myField=foo</code>.<br/><br/></p><h4>Ant style</h4><p>If you like to have complete control over your build, you may prefere the <em>Ant</em> build style.<br/>The price is that you have to <em>write explicitly</em> what your build is doing. </p><p>This example mimics the <a href="http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html">tutorial ANT build script</a> </p>
<pre><code class="Java">public class AntStyleBuild extends JkBuild {

	@JkOption(&quot;Run tests in forked process if true&quot;)
	boolean forkTests;
	
	String name = &quot;myProject&quot;;
	File src = baseDir(&quot;src&quot;);
	File buildDir = baseDir(&quot;build/output&quot;);
	File classDir = new File(buildDir, &quot;classes&quot;);
	File jarFile = new File(buildDir, &quot;jar/&quot; + name + &quot;.jar&quot;);
	String className = &quot;my.mainClass&quot;;
	JkClasspath classpath = JkClasspath.of(baseDir().include(&quot;libs/*.jar&quot;));
	File reportDir = new File(buildDir, &quot;junitRreport&quot;);
	
	@Override
	public void doDefault() {
		clean();jar();run();
	}
	
	public void compile() {
		JkJavaCompiler.ofOutput(classDir).withClasspath(classpath).andSourceDir(src).compile();
		JkFileTree.of(src).exclude(&quot;**/*.java&quot;).copyTo(classDir);
	}
	
	public void jar() {
		compile();
		JkManifest.empty().addMainClass(&quot;my.main.RunClass&quot;).writeToStandardLocation(classDir);
		JkZipper.of(classDir).to(jarFile);
	}	
	
	@JkDoc(&quot;Run the application&quot;)
	public void run() {
		JkJavaProcess.of(jarFile).andClasspath(classpath).runSync();
	}
	
	public void cleanBuild() {
		clean();
		junit();
	}
	
	public void junit() {
		jar();
		JkUnit.of(classpath.and(jarFile))
				.withClassesToTest(JkFileTree.of(classDir).include(&quot;**/*Test.class&quot;))
				.withReportDir(reportDir)
				.withReport(JunitReportDetail.FULL)
				.fork(forkTest)
				.run();
	}
	
	public static void main(String[] args) {
		new AntStyleBuild().doDefault();
	}
	
}
</code></pre><p>From this build definition, we can execute Jerkar the following way :</p>
<ul>
  <li>launch/debug the <code>AntStyleBuild main</code> within your IDE</li>
  <li>launch/debug the <code>org.jerkar.JkMain main</code> method within your IDE. In this mode you<br/>can pass arguments as you would for the command line</li>
  <li>execute a command line in a shell (or on a build server) as <code>jerkar doDefault</code> or <code>jerkar cleanBuild -skipTest=true</code>.</li>
</ul><p><br/></p><h4>Maven style</h4><p>For Java project you may directly extend <code>JkJavaBuild</code> template class which implements common methods for you.<br/>All you need is to implement what is specific.</p>
<pre><code>public class MavenStyleBuild extends JkJavaBuild {
	
	@Override  // optional
	public JkModuleId moduleId() {
		return JkModuleId.of(&quot;org.jerkar&quot;, &quot;script-samples&quot;);
	}

	@Override  // optional
	protected JkVersion defaultVersion() {
		return JkVersion.ofName(&quot;0.3-SNAPSHOT&quot;);
	}

	@Override
	// Optional : needless if you use only local dependencies
	protected JkDependencies dependencies() {
		return JkDependencies
				.builder()
				.on(GUAVA, &quot;18.0&quot;)  // Popular modules are available as Java constant
				.on(JERSEY_SERVER, &quot;1.19&quot;)
				.on(&quot;com.orientechnologies:orientdb-client:2.0.8&quot;)
				.on(JUNIT, &quot;4.11&quot;).scope(TEST).on(MOCKITO_ALL, &quot;1.9.5&quot;)
				.scope(TEST).build();
	}

}
</code></pre><p>This example is for demo purpose. Some settings can be omitted by respecting naming conventions...<br/><br/></p><h4>Conventional style</h4><p>If you follow conventions (project folder named as <em>groupName.projectName</em> ), the above script is reduced to :</p>
<pre><code>public class BuildSampleClassic extends JkJavaBuild {
	
	@Override  // Optional :  needless if you use only local dependencies
	protected JkDependencies dependencies() {
		return JkDependencies.builder() 
			.on(GUAVA, &quot;18.0&quot;)  
			.on(JERSEY_SERVER, &quot;1.19&quot;)
			.on(&quot;com.orientechnologies:orientdb-client:2.0.8&quot;)
			.on(JUNIT, &quot;4.11&quot;).scope(TEST)
			.on(MOCKITO_ALL, &quot;1.9.5&quot;).scope(TEST)
		.build();
	}	
}
</code></pre><p><br/></p><h4>100% Conventional style !!!</h4><p>If you use only local dependencies (jar dependencies located as bellow), you don't even need to write a build file.<br/>Note that local dependencies have to be located in subfolder corresponding to its scope (build, compile, runtime,...).</p><p><img src="img/full-convention-project.png" alt="Project layout full convention""/></p>
<hr/><h3>What can you do now ?</h3><p>From a java project having a build definition as above (or just fully conventional), you can perform many tasks :</p><h4>Basic tasks</h4>
<ul>
  <li><code>jerkar help</code> : outputs on console available methods and option for Jerkar in the current project</li>
  <li><code>jerkar doDefault publish</code> : cleans, compiles, unit tests and produces artifacts (that was actually do the <code>JkJavaBuild#doDefault</code>method) then <code>publish</code> produced artifacts on a remote repository.</li>
  <li><code>jerkar -fatJar=true -forkTests=true</code> : same but also produces a fat-jar (jar file containg all the runtime dependencies) and runs unit tests in a forked process.</li>
  <li><code>jerkar -fatJar -forkTests</code> : same, when field values are not mentioned, Jerkar uses a default value (true for boolean fields)</li>
</ul><p>The last will result in the following artifact creation :<br/><img src="img/output.png" alt="Created artifacts""/></p><h4>Pluggin tasks</h4><p>Template classes (<code>JkBuild</code> and <code>JkJavaBuild</code>) enable plugability by providing hooks on several methods.<br/>A plugin is just a class extending <code>JkBuildPlugin</code> or <code>JkJavaBuildPlugin</code> and overriding default hook methods. Plugins can also provide their own methods.</p>
<ul>
  <li>To activate a plugin on the command line, just mention the name of the plugin followed by a <code>#</code>.</li>
  <li>To parameter a plugin, just mention <code>-pluginName#fieldName=value</code>.</li>
  <li>To launch a method of a plugin, just mention <code>-pluginName#methodName</code>, note that the plugin does not need to be activated for invoking a plugin method.</li>
  <li>To display information about available plugins in current Jerkar instance, simply execute <code>jerkar helpPlugins</code>.</li>
</ul><h5>Examples</h5><p>Jerkar is shipped with <a href="http://www.eclemma.org/jacoco">Jacoco</a> and <a href="http://www.sonarqube.org/">SonarQube</a> plugins out of the box.<br/>This is how you can leverage these plugins : </p>
<ul>
  <li><code>jerkar jacoco#</code> : does <code>doDefault</code> but unit tests will be instrumented by Jacoco code coverage tool</li>
  <li><code>jerkar jacoco# -jacoco#produceHtml</code> : same but also set the <code>JkBuildPluginJacoco#produceHtml</code> field to <code>true</code>. It leads in producing<br/>an html report along the standard jacoco.exec binary report</li>
  <li><p><code>jerkar doDefault sonar#verify</code> : does the default + execute the <code>verify</code> method located in the sonar plugin (launch a sonar analysis)<br/>Analysis is launched on a local SonarQube server unless you specify specific Sonar settings. Sonar will leverage of jacoco report</p></li>
  <li><code>jerkar doDefault verify sonar# jacoco#</code> : launches the <code>doDefault</code> and <code>verify</code> methods and activates the jacoco and sonar plugins. Sonar plugin hooks the <code>JkBuild verify</code> method by launching a SonarQube analysis</li>
</ul></p>

	<hr />

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.3.2</a></p>
      </div>
    </div>
    
    <div class="github hidden-phone hidden-tablet">
		<a href="https://github.com/jerkar/jerkar"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 1050;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
	</div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    
  </body>
</html>