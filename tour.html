<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>tour</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A powerfull pure Java build and automation tool">
    <meta name="author" content="Jerome Angibaud">
    <meta name="keywords" content="build,java,tool,automation,maven,ant,gradle,buildr,sbt,make,compiler,tester,jacoco,pure java build tool,java build tool,build tool,100% java build tool">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- <link href="css/bootstrap.min.css" rel="stylesheet">  -->
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">
    <link href="css/jerkar.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
      
    <![endif]-->
    
      <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  
  	<!-- highlight.js -->
  	<script src="js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<link rel="stylesheet" href="css/highlight-idea.css">
	
	<!-- sidebar css -->
	<link href="css/sidebar.css" rel="stylesheet">
	
  
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">

	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand">
          	<img style="max-width:80px;margin-top: -10px;" src="img/logo/PNG-04.png">
          </a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation<b class="caret"></b></a>
              <ul class="dropdown-menu">
               <li><a href="tour.html">Tour</a></li>
                <li><a href="documentation/latest/getting_started.html">Getting Started</a></li>
                <li><a href="documentation/latest/reference.html">Reference Guide</a></li>
                <li><a href="https://github.com/jerkar/jerkar-examples">Examples</a></li>
                <li><a href="documentation/latest/faq.html">Frequently Asked Questions</a></li>
                <li><a href="javadoc/latest/index.html">Javadoc</a></li>
              </ul>
            </li>
            <li><a href="about.html">About</a></li>
          </ul>
        </div>
       
        
      </div>
    </div>
    <div class="container">
	<p>
	<div id="sidebar-menu" class="col-md-3 hidden-xs hidden-sm">
    <ul class="main-menu nav nav-stacked affix">
        <li><a href="javascript:jerkarMoveTo('Principles',2);">1.Principles</a></li>
        <li class="liexpandable"><a href="javascript:jerkarMoveTo('Build Class styles',2);">2.Build Class styles</a>
          <ul class="sub-menu">
            <li><a href="javascript:jerkarMoveTo('Task Based Build Classes (ala Ant)',3);">2.1.Task Based Build Classes (ala Ant)</a></li>
            <li><a href="javascript:jerkarMoveTo('Templated Build Classes (ala Maven)',3);">2.2.Templated Build Classes (ala Maven...</a></li>
            <li><a href="javascript:jerkarMoveTo('Templated Build Classes with Conventions',3);">2.3.Templated Build Classes with Conve...</a></li>
            <li><a href="javascript:jerkarMoveTo('Build relying fully on conventions',3);">2.4.Build relying fully on conventions</a></li>
            <li><a href="javascript:jerkarMoveTo('Build relying on Eclipse metadata',3);">2.5.Build relying on Eclipse metadata</a></li>
            <li><a href="javascript:jerkarMoveTo('Build Classes dependending on third party libraries.',3);">2.6.Build Classes dependending on thir...</a></li>
            <li><a href="javascript:jerkarMoveTo('Multi-project Builds',3);">2.7.Multi-project Builds</a></li>
          </ul>
        </li>
        <li class="liexpandable"><a href="javascript:jerkarMoveTo('Features offered by build classes',2);">3.Features offered by build classes</a>
          <ul class="sub-menu">
            <li><a href="javascript:jerkarMoveTo('Basic Tasks',3);">3.1.Basic Tasks</a></li>
            <li class="liexpandable"><a href="javascript:jerkarMoveTo('Plugin Tasks',3);">3.2.Plugin Tasks</a>
              <ul class="sub-menu">
                <li><a href="javascript:jerkarMoveTo('Examples',4);">3.2.1.Examples</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li class="liexpandable"><a href="javascript:jerkarMoveTo('Build API',2);">4.Build API</a>
          <ul class="sub-menu">
            <li><a href="javascript:jerkarMoveTo('File Manipulation & Selection',3);">4.1.File Manipulation & Selection</a></li>
            <li><a href="javascript:jerkarMoveTo('Process Launching',3);">4.2.Process Launching</a></li>
            <li class="liexpandable"><a href="javascript:jerkarMoveTo('Java Core Stuffs',3);">4.3.Java Core Stuffs</a>
              <ul class="sub-menu">
                <li><a href="javascript:jerkarMoveTo('Classpaths',4);">4.3.1.Classpaths</a></li>
                <li><a href="javascript:jerkarMoveTo('Class Loaders',4);">4.3.2.Class Loaders</a></li>
                <li><a href="javascript:jerkarMoveTo('Running Java Programs',4);">4.3.3.Running Java Programs</a></li>
              </ul>
            </li>
            <li class="liexpandable"><a href="javascript:jerkarMoveTo('Java Build API',3);">4.4.Java Build API</a>
              <ul class="sub-menu">
                <li><a href="javascript:jerkarMoveTo('Compile Java',4);">4.4.1.Compile Java</a></li>
                <li><a href="javascript:jerkarMoveTo('Junit',4);">4.4.2.Junit</a></li>
              </ul>
            </li>
            <li><a href="javascript:jerkarMoveTo('Dependency Management',3);">4.5.Dependency Management</a></li>
            <li><a href="javascript:jerkarMoveTo('Publication',3);">4.6.Publication</a></li>
            <li><a href="javascript:jerkarMoveTo('Cryptography',3);">4.7.Cryptography</a></li>
            <li><a href="javascript:jerkarMoveTo('SonarQube',3);">4.8.SonarQube</a></li>
          </ul>
        </li>
    </ul>
</div>
<script>
function jerkarMoveTo(title, level) {
    var elemType = 'h'+level;
    var elems = $(elemType);
    var elem;
    for (var i = 0; i < elems.length; i++) {
    	var candidate = elems[i];
    	if (candidate.outerText ===  title) {
    		elem = candidate;
    		break;
    	}
    }
    $('html, body').animate({
        scrollTop: $(elem).offset().top -50
    }, 200);
}
</script><p><div id="static-content" class="col-md-9"></p><h1>Jerkar tour</h1>
<hr/><p>This page gives a concrete idea on how Jerkar is working and what you can do with.</p><h2>Principles</h2><p>Jerkar is quite simpe in its principle. You write a class extending <code>org.jerkar.tool.JkBuild</code> in the <em>build/def</em> directory of your project then you can execute any public zero arg methods from the command line by executing <code>jerkar myMethod1 myOtherMethod</code> at the project root directory. To accomplish this, Jerkar :</p>
<ul>
  <li>Compiles every java sources found under the <em>[PROJECT DIR]/build/def</em> folder.</li>
  <li>Instantiates the first compiled class found implementing <code>org.jerkar.tool.JkBuild</code>. If none the <code>org.jerkar.tool.builtins.templates.javabuild.JkJavaBuild</code> class is instantiated.</li>
  <li>Invokes specified methods on the created instance. If no method is specified then the <code>doDefault</code> method is invoked.</li>
</ul><p>You can also set instance fields from the command line by typing <code>jerkar myMethod -myField=foo</code>.</p><p>Concretely your Java project is structured as :</p><p><img src="img/principle.png" alt="Project layout""/></p><p>And <code>ThisIsTheBuildDefinition</code> code may look like this :</p>
<pre><code class="Java">class ThisIsTheBuildDefinition extends JkBuild {

    File src = file(&quot;src&quot;);
    File buildDir = file(&quot;build/output&quot;);
    JkClasspath classpath = JkClasspath.of(baseDir().include(&quot;libs/*.jar&quot;));
	
    public void compile() {
        JkJavaCompiler.outputtingIn(classDir).withClasspath(classpath).andSourceDir(src).compile();
        JkFileTree.of(src).exclude(&quot;**/*.java&quot;).copyTo(classDir);
    }
    
    ...

}
</code></pre><p>From this starting point you can discover a lot from Jerkar. The following section illustrates different options for writing or not build classes. </p><h2>Build Class styles</h2><p>With Jerkar you can write task based build classes (ala <em>Ant</em>), templated ones (ala <em>Maven</em>) or rely on conventions only (no build class needed). </p><h3>Task Based Build Classes (ala Ant)</h3><p>If you like to have <strong>complete control</strong> over your builds, you may prefer the <em>Ant</em> build style.<br/>The price is that you have to <strong>write explicitly</strong> what your build is doing. </p><p>This example mimics the <a href="http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html">tutorial ANT build script</a> </p>
<pre><code class="Java">public class AntStyleBuild extends JkBuild {

    @JkDoc(&quot;Run tests in forked process if true&quot;)
    boolean forkTests;
	
    String name = &quot;myProject&quot;;
    File src = file(&quot;src&quot;);
    File buildDir = file(&quot;build/output&quot;);
    File classDir = new File(buildDir, &quot;classes&quot;);
    File jarFile = new File(buildDir, &quot;jar/&quot; + name + &quot;.jar&quot;);
    String className = &quot;my.MainClass&quot;;
    JkClasspath classpath = JkClasspath.of(baseDir().include(&quot;libs/*.jar&quot;));
    File reportDir = new File(buildDir, &quot;junitRreport&quot;);
	
    @Override
    public void doDefault() {
        clean();jar();run();
    }
	
    public void compile() {
        JkJavaCompiler.outputtingIn(classDir).withClasspath(classpath).andSourceDir(src).compile();
        JkFileTree.of(src).exclude(&quot;**/*.java&quot;).copyTo(classDir);
    }
	
    public void jar() {
        compile();
        JkManifest.empty().addMainClass(&quot;my.main.RunClass&quot;).writeToStandardLocation(classDir);
        JkZipper.of(classDir).to(jarFile);
    }	
	
    @JkDoc(&quot;Run the application&quot;)
    public void run() {
        JkJavaProcess.of(jarFile).andClasspath(classpath).runSync();
    }
	
    public void cleanBuild() {
        clean();
        junit();
    }
	
    public void junit() {
        jar();
        JkUnit.of(classpath.and(jarFile))
            .withClassesToTest(JkFileTree.of(classDir).include(&quot;**/*Test.class&quot;))
            .withReportDir(reportDir)
            .withReport(JunitReportDetail.FULL)
            .forked(forkTests)
            .run();
    }
	
    public static void main(String[] args) {
        JkInit.ofInstance(AntStyleBuild.class, args).doDefault();
    }

}
</code></pre><p>From this build definition, we can execute Jerkar the following way :</p>
<ul>
  <li>Launch/debug the <code>AntStyleBuild main</code> within your IDE.</li>
  <li>Launch/debug the <code>org.jerkar.tool.JkMain main</code> method within your IDE. In this mode you can pass arguments as you would do with command line.</li>
  <li>Execute a command line in a shell (or on a build server) as <code>jerkar doDefault</code> or <code>jerkar cleanBuild -forkTests=true</code>.</li>
</ul><p><br/></p><h3>Templated Build Classes (ala Maven)</h3><p>For Java projects you may directly extend <code>JkJavaBuild</code> template class which implements common methods for you.<br/>All you need is to implement what is specific.</p>
<pre><code>public class MavenStyleBuild extends JkJavaBuild {
	
    @Override  // optional
    public JkModuleId moduleId() {
        return JkModuleId.of(&quot;org.jerkar&quot;, &quot;script-samples&quot;);
    }

    @Override  // optional
    protected JkVersion version() {
        return JkVersion.name(&quot;0.3-SNAPSHOT&quot;);
    }

    @Override
    // Optional : needless if you use only local dependencies
    protected JkDependencies dependencies() {
        return JkDependencies.builder()
            .on(GUAVA, &quot;18.0&quot;)  // Popular modules are available as Java constant
            .on(JERSEY_SERVER, &quot;1.19&quot;)
            .on(&quot;com.orientechnologies:orientdb-client:2.0.8&quot;)
            .on(JUNIT, &quot;4.11&quot;).scope(TEST)
            .on(MOCKITO_ALL, &quot;1.9.5&quot;).scope(TEST).build();
    }

}
</code></pre><p>This example is for demo purpose. Some settings can be omitted by respecting naming conventions...<br/><br/></p><h3>Templated Build Classes with Conventions</h3><p>If you follow conventions (as project folder named as <em>groupName.projectName</em> and version stored in a <em>version.txt</em> file), the above script turns to :</p>
<pre><code>public class BuildSampleClassic extends JkJavaBuild {
	
    @Override  // Optional :  needless if you use only local dependencies
    protected JkDependencies dependencies() {
        return JkDependencies.builder() 
            .on(GUAVA, &quot;18.0&quot;)  
            .on(JERSEY_SERVER, &quot;1.19&quot;)
            .on(&quot;com.orientechnologies:orientdb-client:2.0.8&quot;)
            .on(JUNIT, &quot;4.11&quot;).scope(TEST)
            .on(MOCKITO_ALL, &quot;1.9.5&quot;).scope(TEST).build();
	}	
}
</code></pre><p><a name="100conventional">&nbsp;</a></p><h3>Build relying fully on conventions</h3><p>If your project uses local file dependencies only (jar dependencies located as below), you don't even need to write a build definitions.<br/>Note that local file dependencies have to be located in sub-folder corresponding to its scope (build, compile, runtime,...).</p><p><img src="img/full-convention-project.png" alt="Project layout full convention""/></p><h3>Build relying on Eclipse metadata</h3><p>If Eclipse is your IDE, you can just reuse information from the <em>.classpath</em> file by using the Eclipse plugin.<br/>Project name, source folders and dependencies can be deducted from this file. Just activate the Eclipse plugin (see below).</p><h3>Build Classes dependending on third party libraries.</h3><p>Your build class can depend itself from managed dependencies </p>
<pre><code>@JkImport(&quot;org.seleniumhq.selenium:selenium-java:2.45.0&quot;)
public class SeleniumTaskBuild extends JkJavaBuild {
	
    @JkDoc(&quot;Performs some load test using Selenium&quot;)
    public void seleniumLoadTest() {
        WebDriver driver = new FirefoxDriver();
        // ....
    }
}
</code></pre><h3>Multi-project Builds</h3><p>In a multi project context, build instances, from different projects, can use each other.<br/>You just have to declare the "slave" build instance as field and annotate it with the <code>@JkProject</code> mentioning the "slave" project relative path.<br/>The annotated field is instantiated and configured when the "master" build is instantiated so you can invoke any of the "slave" methods in your "master" build class. </p>
<pre><code>// This is the master project for building the Jerkar full distribution
public class DistribAllBuild extends JkBuild {
	
    @JkProject(&quot;../org.jerkar.plugins-sonar&quot;)
    PluginsSonarBuild pluginsSonar;
	
    @JkProject(&quot;../org.jerkar.plugins-jacoco&quot;)
    PluginsJacocoBuild pluginsJacoco;
	
    public void doDefault() {
        super.doDefault();
        multiProjectDependencies().invokeDoDefaultMethodOnAllSubProjects();
        CoreBuild core = pluginsJacoco.core;  // The core project is got by transitivity
		
        JkFileTree sourceDir = ...;
        sourceDir.importFiles(pluginsSonar.packer().jarSourceFile(), pluginsJacoco.packer().jarSourceFile());
        ...
    } 
	
	
}
</code></pre>
<div class="alert alert-info" role="alert">
<strong>Note that you can reuse external build elements in a statically typed way !!! </strong>
</div><h2>Features offered by build classes</h2><p>If your build class extends <code>JkJavaBuild</code> or you have no build class at all (build relying fully on conventions), then you have invoke the following tasks :</p><h3>Basic Tasks</h3>
<ul>
  <li><code>jerkar help</code> : outputs on console available methods and options for Jerkar in the current project.</li>
  <li><code>jerkar clean</code> : clean the output directory that is <em>[project dir]/build/output</em>.</li>
  <li><code>jerkar compile</code> : compile the production code (not the test code) and put resources in <em>[project dir]/build/classes</em> directory.</li>
  <li><code>jerkar unitTest</code> : compile the unit tests and run it.</li>
  <li><code>jerkar pack</code> : creates jars from the compiled sources and processed resources (creates test, sources and fat jar as well).</li>
  <li><code>jerkar verify</code> : launch code quality tools on the sources : by default this does not do anyhing unless you activate some quality control plugin (see below).</li>
  <li><code>jerkar publish</code> : publish the produced artifact in the remote repository.</li>
  <li><code>jerkar scaffold</code> : create a Jerkar project struture from scratch, including the build class. If root folder has already a <em>pom.xml</em> file then Jerkar will reuse pom.xml information to generate build class accordingly.</li>
</ul><p>Beside convenient methods are available to launch a 'life-cycle' sequence :</p>
<ul>
  <li><code>jerkar doCompile</code> = <code>jerkar clean compile</code>.</li>
  <li><code>jerkar doUnitTest</code> = <code>jerkar doCompile uniTest</code>.</li>
  <li><code>jerkar doPack</code> = <code>jerkar doUnitTest pack</code>.</li>
  <li><code>jerkar doVerify</code> = <code>jerkar doPack verify</code>.</li>
  <li><code>jerkar doPublish</code> = <code>jerkar doVerify publish</code>.</li>
</ul><p>Whitout omitting the shorthands :</p>
<ul>
  <li><code>jerkar</code> = <code>jerkar doDefault</code> = <code>jerkar doPack</code></li>
</ul><p>These tasks can be parametrized :</p>
<ul>
  <li><code>jerkar -pack.fatJar=true -tests.fork=true</code> = <code>jerkar doPack</code> + forking the unit tests and produce a fat jar</li>
</ul><p>The last will result in the following artifact creation :<br/><img src="img/output.png" alt="Created artifacts""/></p><h3>Plugin Tasks</h3><p>Template classes (<code>JkBuild</code> and <code>JkJavaBuild</code>) enable pluggability by featuring methods with extension points.<br/>A plugin is just a class extending <code>JkBuildPlugin</code> or <code>JkJavaBuildPlugin</code> and overriding default hook methods. Plugins can also provide their own methods.</p>
<ul>
  <li>To activate a plugin on the command line, just mention the name of the plugin followed by a <code>#</code>.</li>
  <li>To parameter a plugin, just mention <code>-pluginName#fieldName=value</code>.</li>
  <li>To launch a method of a plugin, just mention <code>-pluginName#methodName</code>, note that the plugin does not need to be activated for invoking a plugin method.</li>
  <li>To display information about available plugins in current Jerkar instance, simply execute <code>jerkar helpPlugins</code>.</li>
</ul><h4>Examples</h4><p>Jerkar is shipped with <a href="http://eclipse.org/">Eclipse</a>, <a href="http://www.eclemma.org/jacoco">Jacoco</a> and <a href="http://www.sonarqube.org/">SonarQube</a> plugins out of the box.<br/>This is how you can leverage these plugins : </p>
<ul>
  <li><code>jerkar jacoco#</code> : does <code>doDefault</code> but unit tests will be instrumented by Jacoco code coverage tool</li>
  <li><code>jerkar jacoco# -jacoco#produceHtml</code> : same but also set the <code>JkBuildPluginJacoco#produceHtml</code> field to <code>true</code>. It leads in producing an html report along the standard jacoco.exec binary report</li>
  <li><p><code>jerkar doDefault sonar#verify</code> : does the default + execute the <code>verify</code> method located in the sonar plugin (launch a sonar analysis)<br/>Analysis is launched on a local SonarQube server unless you specify specific Sonar settings. Sonar will leverage of jacoco report</p></li>
  <li><code>jerkar doDefault verify sonar# jacoco#</code> : launches the <code>doDefault</code> and <code>verify</code> methods and activates the jacoco and sonar plugins. Sonar plugin hooks the <code>JkBuild verify</code> method by launching a SonarQube analysis</li>
</ul><h2>Build API</h2><p>Jerkar framework comes with a fluent style API making a joy to perform all kind of build related stuff.</p><p>The following sections will give you some ideas on what you can accomplish with this API. To have more insight, please visit <a href="http://jerkar.github.io/javadoc/latest/index.html">Javadoc</a>.</p><h3>File Manipulation &amp; Selection</h3><p>With <code>JkFileTree</code> you can define a set of files having a common root folder and perform common operations on.<br/>The following code shows how to construct a <em>war</em> file from dispersed elements.</p>
<pre><code>JkFileTree war = JkFileTree.of(warDir).importDirContent(webappContentDir)
	.from(&quot;WEB-INF/classes&quot;).importDirContent(build.classDir())
	.from(&quot;../lib&quot;).importFiles(JkFileTree.of(libDir).include(&quot;**/*.jar&quot;);
war.zip().to(warFileDest);
</code></pre><p><code>from</code> method returns another <code>JkFileTree</code> but rooted at the specified relative path.<br/><code>importXxx</code> method copies specified element at the root of the file tree.</p><p><code>JkFileTreeSet</code>, <code>JkPath</code> (sequence of files), <code>JkZipper</code>, <code>JkFileFilter</code> and <code>JkUtilsFile</code> are the other players for manipulate files.<br/>All belong to <code>org.jerkar.api.file</code> package.</p><h3>Process Launching</h3><p>The <code>JkProcess</code> class provides super easy way to launch external process.<br/>The following snippet shows how to launch a Maven process on the project located at <strong>projectBaseDir</strong>.</p>
<pre><code>JkProcess.of(&quot;mvn&quot;, &quot;clean&quot;,&quot;install&quot;,&quot;-U&quot;)
    .withWorkingDir(projectBaseDir)
    .failOnError(true)
    .runSync();
</code></pre><h3>Java Core Stuffs</h3><h4>Classpaths</h4><p><code>JkClasspath</code> allows to construct class-paths and perform queries via classpath scanning.<br/>The following code creates a classpath taking in account all jar under the <strong>extraLibs</strong> folder,<br/>then returns the first one containing the <code>my.SearchedClass</code> class.</p>
<pre><code>File jar = JkClasspath.of(lib1, lb2, lib3).getEntryContainingClass(&quot;my.SearchedClass&quot;); 
</code></pre><h4>Class Loaders</h4><p><code>JkClassloader</code> allows to get or construct class-loaders then scan the class-path or invoke methods within. </p><p>This is how to get the current class loader and loads every class having a package starting by <code>com.mypack</code></p>
<pre><code>JkClassLoader.current().loadClasses(&quot;com/mypack/**/*&quot;);
</code></pre><p>This class provides also methods to perform cross class-loader calls friendly.</p><h4>Running Java Programs</h4><p><code>JkJavaProcess</code> is a Java specific flavor of <code>JkProcess</code>. </p>
<pre><code>JkJavaProcess.of().withWorkingDir(myWorkingDir)
    .andClasspath(mtClasspath).runJarSync(myJarFile);
</code></pre><h3>Java Build API</h3><p>Jerkar provides Fluent API for addressing build of Java projects.</p><h4>Compile Java</h4><p>The <code>JkJavaCompiler</code> helps to compile Java sources.</p>
<pre><code>JkJavaCompiler.outputtingIn(classDir).withClasspath(classpath).andSourceDir(src).compile();
</code></pre><h4>Junit</h4><p>The <code>JkUnit</code> helps to run Junit tests with flexible settings.</p>
<pre><code>JkUnit.of(classpath.and(classDir))
    .withClassesToTest(JkFileTree.of(classDir).include(&quot;**/*Test.class&quot;))
    .withReportDir(reportDir)
    .withReport(JunitReportDetail.FULL)
    .forked(true)
    .run();
</code></pre><p>You can also enhance the Junit process for performing Jacoco test coverage :</p>
<pre><code>JkUnit.of(classpath.and(classDir))
    .withClassesToTest(JkFileTree.of(classDir).include(&quot;**/*Test.class&quot;))
    .withReportDir(reportDir)
    .withEnhancer(JkocoJunitEnhancer.of(reportDir))
    .run();
</code></pre><p>This runs Junit with Jacoco Agent and produces the coverage report in the <em>reportDir</em>.</p><h3>Dependency Management</h3><p>For resolving dependencies you mainly deal with following classes : <code>JkScope</code>, <code>JkRepo</code>, <code>JkRepos</code>,<br/><code>JkDependencies</code>, <code>JkModuleId</code>, <code>JkDependencyResolver</code> </p>
<pre><code>// Define the main module
JkVersionedModule versionedModule = JkModuleId.of(&quot;myGroup&quot;,&quot;myName&quot;).version(&quot;1.2&quot;);

// Create a repo for getting artifacts
JkRepos repos = JkRepos.maven(&quot;http://my.main.repo&quot;);

// Define dependencies
JkDependencies dependencies = JkDependencies.builder()
	.on(GUAVA, &quot;18.0&quot;).scope(JkJavaBuild.COMPILE)
	.on(JUNIT, &quot;4.11&quot;).scope(JKJavaBuild.TEST)
	.build();

// Resolve and get the dependencies as file sequence
Iterable&lt;File&gt; depFiles = JkDependencyrResolver.managed(repos, dependencies, versionedModule)
	.get(JKJavaBuild.TEST);

</code></pre><p>You can also adopt a more direct approach by getting dependency files directly from the repositories :</p>
<pre><code>// Getting files of Spring and its transitive dependencies
Iterable&lt;File&gt; springFiles = JkRepos.maven(&quot;http://my.main.repo&quot;)
	.get(&quot;org.springframework:spring-core:3.0.+&quot;, true);
</code></pre><h3>Publication</h3><p>Jerkar can publish artifacts in both <em>Maven</em> and <em>Ivy</em> repository. </p><p>Depending on the target repository (Maven or Ivy) the structure of publication may differ so we use especific classes for each type.</p><p>To publish on Maven repo (as Nexus) : </p>
<pre><code>// Define the module/version you want publish for
JkVersionedModule versionedModule = JkModuleId.of(&quot;myGroup&quot;,&quot;myName&quot;).version(&quot;1.2&quot;)

// Define its dependencies
JkDependencies dependencies = JkDependencies.builder()
	.on(GUAVA, &quot;18.0&quot;).scope(JkJavaBuild.COMPILE)
	.on(JUNIT, &quot;4.11&quot;).scope(JKJavaBuild.TEST)
	.build();

// These info will be added in the generated POM file. Note that it is optional.
JkMavenPublicationInfo info = JkMavenPublicationInfo
	.of(&quot;Jerkar&quot;, &quot;Build simpler, stronger, faster&quot;, &quot;http://jerkar.github.io&quot;)
	.withScm(&quot;https://github.com/jerkar/jerkar.git&quot;)
	.andApache2License()
	.andGitHubDeveloper(&quot;djeang&quot;, &quot;djeangdev@yahoo.fr&quot;);
	
// Define the artifacts to be deployed	
JkMavenPublication publication = JkMavenPublication.of(mainArtifactFile)
	.and(sourceJarFile, &quot;sources&quot;)   // You can add extra artifacts with classifier
	.and(javadocZipFile, &quot;javadoc&quot;)
	.with(info);  // add the extra info defined above to this publication

// Define repo 
JkPublishRepos repos = JkPublishRepo
    .ofSnapshot(JkRepo.maven(&quot;http://my.nexus.repo/snapshot&quot;))
	.andRelease(JkRepo.maven(&quot;http://my.nexus.repo/release&quot;))
 	.withMd5AndSha1Checksum()
 	.withUniqueSnapshot(false)
 	.withSigner(myPgpSigner);  // Instance of JkPgp class if artifact signature is requiered

// Actually do the publication
JkPublisher.of(repos).publishMaven(versionedModule, publication, dependencies) ;

</code></pre><h3>Cryptography</h3><p>You can sign files or check signature with PGP using the <code>JkPgp</code> class. </p>
<pre><code>JkPgp pgp = JkPgp.of(publicRingKeyFile, privateRingKeyFile, secret);
Files signatures[] = pgp.sign(myFileToSign1, myFileToSign2); 
boolean signatureOk = pgp.verify(signedFile, signatureFile);
</code></pre><p>Note that you don't need to have PGP installed. This is achieved by using <a href="https://www.bouncycastle.org">Bouncy Castle</a> under the hood.</p><h3>SonarQube</h3><p>You can run SonarQube analysis using the <code>JkSonar</code> class :</p>
<pre><code>JkSonar.of(projectKey, projectName, projectVersion)
    .withProjectBaseDir(baseDir) 
    .withBinaries(binDir)
    .withLibraries(libs)
    .withSources(sourceDirs)
    .withProperty(JkSonar.JUNIT_REPORTS_PATH, junitReportDir)
    .withProperty(JkSonar.JACOCO_REPORTS_PATH, jacocoexecReportFile)
    .run();
</code></pre><p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></div> <!--end of wrapper div --> </p>
	</p>

	<hr />

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.3.2</a></p>
      </div>
    </div>
    
   
    
    <!-- javascript =========================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
 	<script>
 	    lastSelect = null;
    	$('.liexpandable').click(function(evt) {
    		var li = $(evt.target).parents("li").first();
    		var ul = li.find(".sub-menu").first();
    		console.log(ul.is(':visible'));
    		evt.stopPropagation();
    		if (ul.is(':visible') && li.html() !== lastSelect) {
    			lastSelect = li.html();
    			return;
    		}
    		lastSelect = li.html();
      		ul.toggle();
 		});
    </script>
    
    <!-- Google Analytics -->
    <script>
  		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  		ga('create', 'UA-103449580-1', 'auto');
  		ga('send', 'pageview');
	</script>
    
  </body>
</html>